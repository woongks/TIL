리액트는 interaction이 많은 웹 앱을 개발하기 위해 사용된다.
리액트는 프레임워크가 아닌 라이브러리다.

### 프레임워크와 라이브러리의 차이?

프레임워크는 어떤 앱을 만들기 위해 필요한 것들을 대부분 갖고 있는 것이다.
라이브러리는 어떤 기능을 모듈화 해놓은 것이다.

리액트는 UI를 렌더링 하는 데 관여를 한다.
화면을 바꾸는 라우팅은 react-router-dom 모듈을 사용하고
상태 관리를 위해서는 redux 등의 모듈을 사용한다.
테스트, 빌드에도 모듈을 골라서 쓰기 때문에 써야 하는 모듈이 정해져 있는 프레임워크가 아닌 라이브러리다.

### 컴포넌트란?

리액트로 만들어진 앱을 구성하는 최소 단위다.
하나의 덩어리를 뜻하며 웹페이지의 검색 컴포넌트, 포스트 컴포넌트 등으로 구분을 지을 수 있고, 재사용이 가능하다.

리액트에는 클래스형 컴포넌트와 함수형 컴포넌트가 있는데, 리액트 훅이라는 것이 나온 이후에는 거의 함수형 컴포넌트만 쓰게 된다.

### 가상 돔이란?

브라우저가 그려지는 원리를 먼저 알아야 한다.
브라우저가 그려지는 원리를 CRP(Critical Render Path)라고 한다.

렌더 엔진이 HTML 문서를 읽고 DOM 트리를 생성한다. CSS를 통해 CSSOM을 생성하고 JS를 적용해서 합치며 렌더 트리를 생성한다.

렌더 트리를 생성한 후에는 layout 단계다. layout 단계에서 페이지에 표시되는 요소들의 크기와 위치를 계산한다.

이후에 paint 단계에서 실제 요소를 그리게 된다.

#### 기존 렌더링 방식의 한계

어떤 interaction에 의해 DOM에 변화가 발생하면 그 때마다 렌더 트리가 재생성된다. 즉, 모든 요소들의 스타일을 다시 계산하고 layout과 repaint 과정까지 다시 거치게 된다.

이를 보완하기 위해 가상 돔이 나왔다.
가상 돔은 실제 DOM을 메모리에 복사해준 것이다.

가상 돔은 다음과 같이 작동한다.

데이터가 바뀌면 가상 돔에 렌더링이 된다.
이때, 이전의 가상 돔과 현재의 새로운 가상 돔을 비교하게 된다.
비교해서 달라진 점만 파악할 수 있는데, 이 변경사항만 실제 돔에 적용을 시킨다.
(바뀐 부분을 찾는 과정을 diffing이라고 한다. 바뀐 부분만 실제 돔에 적용시켜주는 것을 reconciliation 혹은 재조정이라고 한다.)

### 리액트 작동 순서

index.html -> src/index.js 에서 element를 잡아서 꾸민다.

페이지 전환은 html5의 history api를 사용한다.

html 태그를 JS에서 쓰는 것을 JSX(Javascript Syntax eXtension)라고 한다.

리액트에서 JSX는 필수가 아니지만 리액트 문법으로 화면을 그리는 것보다 편리하다.
그래서 JSX를 쓰고 바벨을 통해 변환을 시킨다.

### JSX Key?

리액트에서 배열의 요소는 고유의 key 값을 가져야 한다.

이유?

> 가상 돔이 변경된 사항을 인지하는 과정에서 key 값을 두면 그 과정이 더 정확하다.

```
<ul>
    <li>1<li>
    <li>2<li>
</ul>

<ul>
    <li>1<li>
    <li>2<li>
    <li>3<li>
</ul>
```

> 위와 같이 변경하는 경우 key가 없어도 리액트가 3을 추가하는 것을 인식할 수 있다.

```
<ul>
    <li>1<li>
    <li>2<li>
</ul>

<ul>
    <li>3<li>
    <li>1<li>
    <li>2<li>
</ul>
```

> 하지만 이렇게 변경이 되는 경우 리액트는 3이 맨 위로 오는 것으로 인식을 못 하고 내용이 통째로 바뀐 줄 안다. 하지만 key 값이 있으면 3번이 추가되었고 1,2가 자리 이동을 한 것을 알 수 있다.
