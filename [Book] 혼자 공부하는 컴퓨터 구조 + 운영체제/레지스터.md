### 반드시 알아야 할 레지스터?

레지스터는 대표적으로 8가지가 있다.

1. 프로그램 카운터
2. 명령어 레지스터
3. 메모리 주소 레지스터
4. 메모리 버퍼 레지스터
5. 플래그 레지스터
6. 범용 레지스터
7. 스택 포인터
8. 베이스 레지스터

프로그램 카운터

> 프로그램 카운터는 메모리에서 가져올 명령어의 주소를 저장한다.
> 명령어 포인터라고 부르는 CPU도 있다.

명령어 레지스터

> 명령어 레지스터는 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터다.
> 제어장치는 명령어 레지스터 속 명령어를 받아들이고 이를 해석해서 제어 신호를 내보낸다.

메모리 주소 레지스터

> 메모리 주소를 저장하는 레지스터다. CPU가 읽어 들이고자 하는 주소 값을 주소 버스로 보낼 때 메모리 주소 레지스터를 거치게 된다.

메모리 버퍼 레지스터

> 메모리와 주고 받을 값(데이터와 명령어)을 저장한다. 메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값은 메모리 버퍼 레지스터를 거친다.

### 메모리에 저장된 프로그램을 실행하는 과정

> 메모리에 1000~1500번지까지 프로그램이 저장되어 있다고 가정.
> 프로그램 카운터에는 메모리 스택 가장 위(첫 번째)에 있는 주소를 저장한다. 즉, 1000을 프로그램 카운터에 저장한다.

> 주소 버스를 통해 메모리 주소 레지스터에 1000을 보낸다. 메모리 주소 레지스터에 1000이 저장된다.

> 메모리 읽기 제어 신호와 메모리 주소 레지스터 값이 각각 제어 버스와 주소 버스를 통해 메모리로 보내진다.

> 메모리 주소 1000번지에 저장된 값은 데이터 버스를 통해 메모리 버퍼 레지스터로 전달되고, 프로그램 카운터는 증가되어 다음 명령어를 읽어 들일 준비를 한다.

> 메모리 버퍼 레지스터에 저장된 값은 명령어 레지스터로 이동한다.

> 제어장치는 명령어 레지스터의 명령어를 해석하고 제어 신호를 발생시킨다.

> 이 과정을 계속 반복한다.

예외: 프로그램 카운터는 순차적으로 증가하며 프로그램을 차례대로 실행하지만, 특정 메모리 주소로 실행 흐름을 이동하는 명령어가 실행되는 경우에는 프로그램 카운터에 변경된 주소가 저장된다.

#### 범용 레지스터

범용 레지스터는 말 그대로 일반적인 상황에서 다양하게 사용할 수 있는 레지스터다. 범용 레지스터는 다른 레지스터와 다르게 데이터와 주소를 모두 저장할 수 있다. 일반적으로 CPU 안에는 여러 개의 범용 레지스터가 존재한다.

#### 플래그 레지스터

플래그 레지스터는 연산 결과나 CPU 상태에 대한 부가적인 정보, 즉 플래그를 저장하는 레지스터다.

### 특정 레지스터를 이용한 주소 지정 방식

#### 스택 주소 지정 방식

> 스택과 스택 포인터를 이용한 주소 지정 방식이다. 스택 포인터는 스택의 꼭대기를 가리키는 레지스터다. 즉, 스택 포인터는 스택에 마지막으로 저장한 값의 위치를 저장한다.

#### 변위 주소 지정 방식

> 이 방식은 오퍼랜드 필드(메모리 주소나 레지스터 이름이 담기는 곳) 값과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는 주소 지정 방식이다.
> 오퍼랜드 필드와 어떤 레지스터 값을 더하는지에 따라 **상대 주소 지정 방식**과 **베이스 레지스터 주소 지정 방식**으로 나뉜다(이 둘 말고도 더 있다).

##### 상대 주소 지정 방식

> 오퍼랜드와 프로그램 카운터의 값을 더하여 유효 주소를 얻는 방식이다.
> 프로그램 카운터에는 읽어 들일 명령어의 주소가 들어있게 되고 오퍼랜드에는 숫자가 들어있게 되는데, 오퍼랜드의 수만큼 주소를 이동한다고 생각할 수 있다.

##### 베이스 레지스터 주소 지정 방식

> 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식이다. 베이스 레지스터는 기준 주소를 의미한다. 오퍼랜드는 기준 주소로부터 떨어진 거리를 의미한다. 즉, 베이스 레지스터 속 기준 주소로부터 오퍼랜드만큼 떨어진 주소로 접근하라는 뜻이다.

