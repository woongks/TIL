## 보조기억장치

대표적인 보조기억장치로는 하드 디스크와 플래시 메모리가 있다.

### 하드 디스크

하드 디스크는 자기적인 방식으로 데이터를 저장하는 보조기억장치다.

하드디스크 내부에는 플래터라고 불리는 동그란 원판이 있다. 자기 물질로 덮여 있어 많은 N극과 S극을 저장하는데, 각각 0과 1의 역할을 수행한다.

플래터를 회전시키는 구성 요소는 스핀들이며 RPM으로 표현한다.

플래터 위에서 미세하게 떠 있는 채로 데이터를 읽고 쓰는 부품은 헤드라고 부른다. 바늘과 유사하다. 그리고 헤드는 디스크 암에 부착되어 있다. 하드디스크는 여러 겹의 플래터로 이루어져 있고 플래터 양면을 모두 사용할 수 있다. 양면 플래터를 사용하는 경우 플래터당 두 개의 헤드가 사용된다.

플래터는 트랙과 섹터라는 단위로 데이터를 저장한다. 플래터를 여러 동심원으로 나누었을 때 그중 하나의 원을 트랙이라고 한다. 그리고 이 트랙은 피자처럼 조각으로 나누어지는데, 이 조각을 섹터라고 부른다. 섹터는 하드디스크의 가장 작은 전송 단위다. 하나 이상의 섹터를 묶어 블록이라고 표현하기도 한다.

여러 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위를 실린더라고 부른다. 연속된 정보는 보통 한 실린더에 기록된다. 그 이유는 디스크 암을 움직이지 않고 바로 데이터에 접근할 수 있기 때문이다.

하드 디스크에 저장된 데이터에 접근하는 시간은 크게 탐색 시간, 회전 지연, 전송 시간으로 나뉜다. 탐색 시간은 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간을 의미한다. 회전 지연은 헤드가 있는 곳으로 플래터를 회전시키는 시간을 의미한다. 전송 시간은 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간을 의미한다.

### 플래시 메모리

USB, SD 카드, SSD 등은 모두 플래시 메모리 기반의 보조기억장치다.

플래시 메모리는 반도체 기반의 저장 장치다. 플래시 메모리에는 크게 NAND 플래시와 NOR 플래시가 있다. 대용량 저장 장치로 많이 사용되는 플래시 메모리는 NAND 플래시 메모리다.

플래시 메모리에는 셀이라는 단위가 있다. 한 셀에 1비트를 저장할 수 있으면 SLC, 2비트는 MLC, 3비트는 TLC라고 한다. 4비트를 저장하는 QLC 타입도 있다.

플래시 메모리에는 수명이 있다. 일정 횟수 이상 데이터를 쓰고 지우면 메모리의 셀은 더 이상 데이터를 저장할 수 없기 때문이다.

셀에 많은 비트를 저장할 수 있으면 대용량을 만들기가 쉽겠지만, 속도와 수명은 떨어진다.

메모리에서 셀보다 큰 단위는 페이지, 그리고 블록, 그리고 플레인, 마지막으로 다이라고 부른다.

플래시의 특징으로는 읽기/쓰기 단위와 삭제 단위가 다르다는 것이 있다.
Free 상태는 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태를 의미한다.
Valid 상태는 데이터를 저장하고 있는 상태를 의미한다. Invalid 상태는 유효하지 않은 데이터를 저장하고 있는 상태를 의미한다.

플래시 메모리는 덮어쓰기가 불가능하다. 따라서 불필요한 데이터는 삭제되지 않은 채 용량을 차지한다. 최근 플래시 메모리는 이를 보완하기 위해 가비지 컬렉션 기능을 제공한다. 가비지 컬렉션은 유효한 페이지들만을 새로운 블록으로 복사한 뒤에 기존의 블록을 삭제하는 기능이다.

### RAID 정의와 종류

RAID는 Redundant Array of Independent Disks의 약자다. 데이터의 안전성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술을 의미한다.

RIAD를 구성하는 방법은 여러가지가 있다. 대표적으로 RAID 0, RAID 2, ... , RAID 6, 그리고 RAID 10, 50 등이 있다. RAID 0은 단순히 여러 개의 보조기억장치에 데이터를 나누어 저장하는 구성 방식이다. 각 하드 디스크에 번갈아 가며 데이터를 저장한다. 이 모양새가 줄무늬처럼 분산되기 때문에 저장된 데이터를 스트라입이라고 하고 분산하여 저장하는 것을 스트라이핑이라 한다.

이렇게 데이터가 분산되어 저장되면 데이터를 동시에 읽고 쓸 수 있다.
하지만 단점이 존재한다. 저장된 정보가 안전하지 않다.
RAID 0으로 구성된 하드 디스크 중 하나에 문제가 생기면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있다.

RAID 1은 복사본을 만드는 방식이다. 동일한 데이터를 복사해서 보관한다.
복구가 매우 간단하다는 장점이 있지만 RAID 0에 비해 용량이 작아지고 쓰기 속도가 느리다.

RAID 4는 완전한 복사본 대신 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식이다. 오류를 검출하고 복구하기 위한 정보를 패리티 비트라고 한다. RAID 1보다 적은 하드 디스크로 데이터를 안전하게 보관할 수 있다. (패리티 비트는 오류 검출용 정보지만 RAID에서는 오류 복구도 가능하다.)

RAID 4에서는 어떤 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게 되므로 패리티 저장 장치에 병목 현상이 발생한다.

RAID 5는 각 디스크에 패리티 정보를 분산하여 저장하는 방식으로 병목 현상을 해소한다.

RAID 6. 기본적으로 구성은 RAID 5와 같지만 서로 다른 패리티 두 개를 두는 방식이다. 따라서 패리티가 두 배 많으며 더 안전한 구성이다. 다만 새로운 정보를 저장할 때마다 함께 저장할 패리티가 두 개이므로, 쓰기 속도는 RAID 5보다 느리다.
